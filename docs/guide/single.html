<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Grails Spring Security Mock Plugin 0.9.9</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#history"><strong>2</strong><span>History</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#usage"><strong>3</strong><span>Usage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#configuration"><strong>4</strong><span>Configuration</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p>Mock authentication support for Spring Security</p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Grails Spring Security Mock Plugin - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Aaron J. Zirbes</p>
                            <p><strong>Version:</strong> 0.9.9</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#history"><strong>2</strong><span>History</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#usage"><strong>3</strong><span>Usage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#configuration"><strong>4</strong><span>Configuration</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="introduction">1 Introduction</h1>
The Mock plugin adds support for adding "mock" authentication to a Grails applications that uses Spring Security.  It depends on the Spring Security Core plugin.<p class="paragraph"/>This is helpful when the spring security implementation is tied to localized infrastructure such as LDAP, CAS, Shibboleth, or something of the like.<p class="paragraph"/>The username and roles mocked up by the plugin are configurable within your Config.groovy file.<p class="paragraph"/>It is suggested that you restrict spring security to only allow access from localhost when using this plugin to prevent unwanted access to your application when authentication is being bypassed.<p class="paragraph"/>It is recommended that you wrap the configuration settings for this pluggin to only load when in development, or possibly test mode.



<h1 id="history">2 History</h1>
<ul class="star">
<li>Version 0.9.0</li>
<ul class="star">
<li>Released January 9, 2012</li>
</ul>
<li>Version 0.9.8</li>
<ul class="star">
<li>Released January 12, 2012</li>
</ul>
<li>Version 0.9.9</li>
<ul class="star">
<li>Released January 19, 2012</li>
</ul></ul><p class="paragraph"/>


<h1 id="usage">3 Usage</h1>
<blockquote class="note">
This plugin exposes a rather large security hole in your application.  It is HIGHLY recommended that you restrict access to your application to localhost when you are using this plugin, and that you only use this plugin in development mode.  This can be done with the <a href="http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/18%20IP%20Address%20Restrictions.html" target="blank">ipRestrictions</a> configuration parameter.
</blockquote><p class="paragraph"/>When this plugin is enabled, it automatically authenticates anyone using the application as a fake user with fake user roles as defined in Config.groovy.<p class="paragraph"/>The recommended configuration settings are what follows:
<div class="code"><pre>development &#123;
	&#8230;
	grails.plugins.springsecurity.mock.active = <span class="java&#45;keyword">true</span>
	grails.plugins.springsecurity.mock.fullName = <span class="java&#45;quote">"Your name here"</span>
	grails.plugins.springsecurity.mock.email = <span class="java&#45;quote">"Your email address here"</span>
	grails.plugins.springsecurity.mock.username =  <span class="java&#45;quote">"your.username"</span>
	grails.plugins.springsecurity.mock.roles = &#91; 'ROLE_USER', 'ROLE_ADMIN', 'ROLE_WHATEVERELSE' &#93;
	grails.plugins.springsecurity.ipRestrictions = &#91; '/&#42;&#42;': &#91;'127.0.0.0/8', '::1/128'&#93; &#93;
	&#8230;
&#125;</pre></div><p class="paragraph"/>where "Your name here" is the name of the user, "Your email address here" is the email address of the user, "your.username" is the username of the user, and "roles" is a list of roles you wish to be assigned to the user that will be automatically logged into your grails application.<p class="paragraph"/><h4>Remember</h4>
This is a dangerous plugin.  You should only enable this plugin for development use.  The example above shows the configuration as being wrapped inside of the "development" closure in the Groovy.config file.<p class="paragraph"/>In your staging and production environments, make sure to set
<div class="code"><pre>grails.plugins.springsecurity.mock.active = <span class="java&#45;keyword">false</span></pre></div>
If you have the Spring Security LDAP plugin installed as well, but don't want to load roles from LDAP, make sure to set the following to disable LDAP role lookup.
<div class="code"><pre>grails.plugins.springsecurity.ldap.active = <span class="java&#45;keyword">false</span></pre></div><p class="paragraph"/>


<h1 id="configuration">4 Configuration</h1>
There are a few configuration options for the "Mock" plugin.<p class="paragraph"/><blockquote class="note">
This plugin exposes a rather large security hole in your application.  It is HIGHLY recommended that you restrict access to your application to localhost when you are using this plugin, and that you only use this plugin in development mode.  This can be done with the <a href="http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/18%20IP%20Address%20Restrictions.html" target="blank">ipRestrictions</a> configuration parameter.
</blockquote><p class="paragraph"/><blockquote class="note">
All of these property overrides must be specified in <code>grails-app/conf/Config.groovy</code> using the <code>grails.plugins.springsecurity</code> suffix, for example
<div class="code"><pre>grails.plugins.springsecurity.mock.username = 'aaronzirbes'</pre></div>
</blockquote><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Name</strong></th><th><strong class="bold">Default</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>mock.active</td><td><code>false</code></td><td>whether the plugin is enabled or not (e.g. to disable per-environment)</td></tr><tr class="table-even"><td>mock.fullName</td><td>'Fake User Account'</td><td>the full name of the mock user being automatically logged in</td></tr><tr class="table-odd"><td>mock.email</td><td>'fake<code>example.org'</td><td>the email address of the mock user being automatically logged in</td></tr><tr class="table-even"><td>mock.username</td><td>'fakeuser'</td><td>the username of the mock user being automatically logged in</td></tr><tr class="table-odd"><td>mock.roles</td><td>'ROLE_USER', 'ROLE_ADMIN'</td><td>a collection of roles that will be automatically assigned to the mock user being auto-logged in to your application</td></tr><tr class="table-even"><td>mock.load.dao</td><td></code>false<code></td><td>whether or not the plugin trys to load roles from GORM instead of the </code>mock.roles@ setting</td></tr></table><p class="paragraph"/><blockquote class="note">
Configuration settings from spring-security-ldap that affect the behavior of this plugin
</blockquote><p class="paragraph"/>If all three of these settings are configured and enabled, then the Mock plugin will attempt to load
roles from LDAP rather than from the <code>mock.roles</code> configuration setting.<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Name</strong></th><th><strong class="bold">Default</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>ldap.active</td><td><code>true</code></td><td>this must be set to true for spring-security-mock to load roles from LDAP</td></tr><tr class="table-even"><td>ldap.authorities.retrieveGroupRoles</td><td><code>true</code></td><td>this must be set to true for spring-security-mock to load roles from LDAP</td></tr><tr class="table-odd"><td>ldap.usernameMapper.userDnBase</td><td>none, must be set</td><td>this must be set to true for spring-security-mock to load roles from LDAP.  This will be used to build the userDn that will be used to search LDAP for roles associated with the user.  The full DN will be equivalent to "cn=${username},${userDnBase}"</td></tr></table><p class="paragraph"/><h2>Using a different User Details Service</h2><p class="paragraph"/>You can use any User Details Service with the Mock plugin as long as it implements <a href="../ref/Httpsgithubcomgrailspluginsgrailsspringsecuritycoreblobmastersrcjavaorgcodehausgroovygrailspluginsspringsecurity Grails User Details Servicejava/GrailsUserDetailsService.html" class="https://github.com/grails-plugins/grails-spring-security-core/blob/master/src/java/org/codehaus/groovy/grails/plugins/springsecurity/GrailsUserDetailsService.java">GrailsUserDetailsService</a>. This is accomplished by setting the <code>userDetailsService</code> in your <code>grails-app/conf/spring/resources.groovy</code> file.<p class="paragraph"/>For example:<p class="paragraph"/><div class="code"><pre>beans = &#123;
   userDetailsService(com.mycompany.myapp.MyUserDetailsService)
&#125;</pre></div><p class="paragraph"/>


                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
